<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/TR/html4/">
          <head>
            <title>Soapbox - Another Static Site Generator</title>
            <link rel="stylesheet" href="styles/default.css" type="text/css" />
          </head>
          <body>
            <div>
              <div id="banner">
                <div id="illust"></div>
                <div id="logo"></div>
              </div>
              <div id="main">
                <div class="container">
                  <div id="content"><section><h1>Soapbox - Another Static Site Generator</h1><p><a href="https://github.com/arnolddevos/Soapbox">Soapbox</a> creates static web sites from markdown, images, plain HTML and other resources. It is an <a href="http://www.scala-sbt.org/">sbt</a> 0.13 plugin and easy to configure via sbt settings or extend with scala code.</p><p>Here's what it can do:</p>
<ul>
  <li><p>Convert markdown using <a href="https://github.com/sirthias/pegdown">pegdown</a> and copy resources into a web site.</p></li>
  <li><p>Apply templates, which are scala functions. (Scala's XML syntax works well here.)</p></li>
  <li><p>Generate a blog and/or a picture gallery based on the site contents.</p></li>
  <li><p>Generate reveal.js presentations from markdown.</p></li>
  <li><p>Conveniently incorporate Bootstrap, Highlight.js, Twitter, Disqus and Google Analytics.</p></li>
  <li><p>Extract content from existing XHTML pages, convert it to markdown and incorporate it into the site.</p></li>
</ul><p><em>Update</em>: Now with browser reload for Chrome!</p></section><section><h2>Rationale and Alternatives</h2><p>There are many alternatives. <a href="http://jekyllrb.com/">Jekyll</a>, which powers github pages, is popular and easy to use. The author has successfully deployed Jekyll for internal documentation sites and can recommend it.</p><p>In comparison, Soapbox is more scala oriented. It is easy for scala programmers to configure and extend Soapbox.</p><p>One could also use sbt with the <a href="http://software.clapper.org/sbt-lwm/">lwm</a> plugin or similar. In comparison, Soapbox is more specialized for web site generation.</p><p>The author started this project as <a href="https://github.com/arnolddevos/SPublisher">SPublisher</a> and then migrated the most useful features to the sbt environment. Some things, such as RSS, were dropped. Markdown replaces the tomcat notes utility for authoring content.</p></section><section><h2>Quick Start</h2><p>Create a project with the structure below. Download twitter bootstrap, reveal.js, highlight.js and/or other libraries as subdirectories of <code>lib</code>. (The default templates uses the libraries mentioned.)</p><p>Make sure you have sbt 0.13 or better installed and build your site:</p>
<pre><code class="sh">sbt siteBuild
</code></pre><p>And admire the result in <code>target/site</code>.</p></section><section><h2>Soapbox Project Structure</h2><p>The default directory structure for a Soapbox project looks like this:</p>
<pre><code>+-- build.sbt
|
+--project
|  |
|  +--soapbox.sbt
|  +--Templates.scala
|
+--lib
|  |
|  +--bootstrap-3.2-dist
|  |  |
|  |  +--css
|  |  +--fonts
|  |  +--js
|  |
|  +--highlight
|  |  |
|  |
|  +--reveal
|     |
|
+--src
|  |
|  +--site
|     |
|     +-- blog.txt
|     +-- tree of markdown, css, js, image and other files
|
+--target
   |
   +--site
      |
      +-- generated web site
</code></pre><h3>build.sbt</h3><p>This contains the main settings for the site. For example:</p>
<pre><code class="scala">siteDomain := &quot;notes.langdale.com.au&quot;

analyticsTracker := &quot;UA-9999999-3&quot;

disqusID := &quot;notasvandevos&quot;

twitterID := &quot;a4dev&quot;

blogPath := &quot;index.html&quot;

blogTitle := &quot;Software related Notes by Arnold deVos by date&quot;

siteMenu := Menu( &quot;Main&quot;,
  List(
    &quot;Home&quot; -&gt; &quot;index.html&quot;,
    &quot;About&quot; -&gt; &quot;About.html&quot;,
    &quot;GitHub&quot; -&gt; &quot;http://github.com/arnolddevos/&quot;,
    &quot;Contact&quot; -&gt; &quot;http://www.langdale.com.au/contacts/adv.html&quot;
  )
)
</code></pre><p>See the <a href="TaskReference.html">task and setting reference</a> or <a href="https://github.com/arnolddevos/Soapbox/blob/master/TaskReference.md">here</a>.</p><h3>soapbox.sbt</h3><p>This endows sbt with the desired version of soapbox. It has one line:</p>
<pre><code class="scala">addSbtPlugin(&quot;au.com.langdale&quot; % &quot;soapbox&quot; % &quot;0.5&quot;)
</code></pre><h3>lib</h3><p>Place a copy or clone of twitter bootstrap, reveal.js, highlight.js and/or other such libraries in subdirectories of <code>lib</code>.</p><p>Soapbox will copy the relevant resource files from these into the proper positions in the generated site. That is: font, style, script and image file are copied preserving their pathnames relative to their subdirectory of lib.</p><h3>Templates.scala</h3><p>Templates add the page boilerplate to the bare content. They also link to style and script resources.</p><p>There are default templates that reference bootstrap, reveal.js and highlight.js. You can override these.</p><p>The simplest possible template definition looks like this:</p>
<pre><code class="scala">import au.com.langdale.soapbox.Publisher._
import sbt._

object Templates extends Plugin {
  override def projectSettings = Seq(
    siteTemplates += Template(&quot;*.md&quot;,
      (title, content) =&gt; {
        &lt;html xmlns={XHTML}&gt;
          &lt;head&gt;&lt;title&gt;{title}&lt;/title&gt;&lt;/head&gt;
          &lt;body&gt;{content}&lt;/body&gt;
        &lt;/html&gt;
      }
    )
  )
}
</code></pre><p>The pattern <code>&quot;*.md&quot;</code> determines which source files are expanded with this template. The template itself is a function <code>(String, NodeSeq) =&gt; Elem</code>.</p><p>Any number of templates can be appended to <code>siteTemplates</code>, each for a different set of source files. The pattern can be replaced with an explicit FileFilter. The templates need not all reside in <code>Templates.scala</code>. A number of <code>.scala</code> files can be created.</p><p>As templates are just scala functions they can be composed as required and common parts factored out. Templates can also reference tasks and settings. For example, a template might use <code>sitePath.value</code> to construct links.</p><h3>Markdown files</h3><p>Markdown files should match *.md or *.markdown. Each will be translated to HTML and expanded into a template producing a .html file. The path of the markdown file relative to src/site is preserved in target/site.</p><p>Any file matching *.reveal is processed as markdown but expanded into a slideshow template instead of the usual page template. Each first or second level heading in the document starts a new slide. You will need to have reveal.js installed under lib for the slideshow to work.</p><h3>blog.txt</h3><p>This is used to create a chronological list of pages, the blog.</p>
<pre><code>2012-03-25 An_Incremental_JSON_Generator.html
2010-09-19 Querying_a_Dataset_with_Scala_s_Pattern_Matching.html
2010-09-14 Generators_in_Scala.html
2010-08-11 An_Update_to_the_Scala_Jetty_Wrapper.html
2010-04-16 Pimping_Servlet_and_Jetty.html
2009-11-14 Polyphonic_Scala_Actors_Part_2.html
2009-10-21 Polyphonic_Scala_Actors_Part_1.html
</code></pre><p>Each line gives a publication date and the pathname of a file in the generated site.</p><p>There can be a number of blog listings: all files matching <code>*blog.txt</code> are merged to form a combined listing.</p><h3>src/site and target/site</h3><p>The markdown files and all resources needed to generate the site belong under the <code>src/site</code> directory. There is no restriction on the directory hierarchy, which is replicated in the generated site under <code>target/site</code>.</p><p>It is often convenient to merge a number of directory trees to form the site. The <code>siteSources</code> setting can be set in <code>build.sbt</code>. It takes a <code>Seq[File]</code>.</p><h3>Browser Reload Support</h3><p>The <code>browserReload</code> task depends on (ie runs) <code>siteBuild</code> then tells a chrome extension to refresh selected tabs. It is intended to be run continuously like this:</p>
<pre><code>~browserReload
</code></pre><p>Then:</p>
<ul>
  <li>Load the chrome extension (see below).</li>
  <li>Call up a page in your generated site (via a local web browser perhaps).</li>
  <li>Click the &quot;reload page if sbt sources change button&quot;.</li>
</ul><p>Edit and save a source!</p><h4>How to Install the Browser Reload Extension</h4><p>Get the browser reload plugin:</p>
<pre><code>wget https://github.com/arnolddevos/browser-reload/archive/just-the-reload-stuff.zip
unzip browser-reload-just-the-reload-stuff.zip
</code></pre><p>In google chrome (or in chromium) add the browser reload plugin.</p>
<ul>
  <li>Goto <a href="chrome://extensions/">chrome://extensions/</a></li>
  <li>Enable developer mode</li>
  <li>Click &quot;Load unpacked extension&quot;</li>
  <li>Select browser-reload-just-the-reload-stuff/chrome-extension</li>
</ul></section></div>
                </div>
              </div>
              <div id="menu">
                <ul class="nav nav-pills">
                  <li><a href="index.html" class="menu">Home</a></li><li><a href="About.html" class="menu">About</a></li>
                </ul>
              </div>
              <div id="footer"></div>
            </div>
          </body>
        </html>